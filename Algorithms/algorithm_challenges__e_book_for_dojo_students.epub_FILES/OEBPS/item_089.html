<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="description" content="Computer Science Algorithms Data Structures JavaScript JS" /><meta name="generator" content="Aspose.Words for .NET 13.6.0.0" /><title>Algorithms_Collection</title><link href="item_083.css" type="text/css" rel="stylesheet" /></head><body><div style="clear:both; mso-break-type:section-break; page-break-before:auto"><h2 id="navPoint_127"><span>Bit Shifting and Masking</span></h2><p style="line-height:115%"><span>T</span><span>o</span><span> save space, </span><span>you</span><span> can encode </span><span>numbers into large</span><span> containers</span><span>, by shifting</span><span> values into different section</span><span>s</span><span> of the container. </span><span>Example:</span><span> </span><span>left-shift </span><span class="CodeSnippet" style="font-family:Times, serif">0x1CED</span><span> by sixteen (</span><span class="CodeSnippet" style="font-family:Times, serif">&lt;&lt; 16</span><span>) to </span><span class="CodeSnippet" style="font-family:Times, serif">0x1CED0000</span><span>, leaving space for another 16-bit num. </span><span>Combine these </span><span>using </span><span class="CodeSnippet" style="font-family:Times, serif">|</span><span>, </span><span>like so</span><span>: </span><span class="CodeSnippet" style="font-family:Times, serif">(0x1CED &lt;&lt; 16) | 0xF00D == 0x1CEDF00D</span><span>. </span></p><p><span>&#xa0;</span></p><p><span>Sometimes bits in a number represent 32 independent ON/OFF states (such as the Yes/No votes of 32 people, or the current settings of 32 light switches in your house). This can be much more convenient than storing each of the 32 values individually, as long as we can manipulate each bit separately. </span></p><p><span>&#xa0;</span></p><p style="line-height:115%"><span>Thinking about our bitwise operators, every bit can be set by using a combination of </span><span class="CodeSnippet" style="font-family:Times, serif">|</span><span> and </span><span class="CodeSnippet" style="font-family:Times, serif">&lt;&lt;</span><span>. To </span><span>set bits 17 and 18 but keep the rest of the variable untouched, we could </span><span class="CodeSnippet" style="font-family:Times, serif">val |= (0x3 &lt;&lt; 17)</span><span>. Those bits might have previously been 0 or 1, but now they are 1 (because any value </span><span style="font-weight:bold">OR 1</span><span> becomes 1). </span></p><p><span>&#xa0;</span></p><p style="line-height:115%"><span>On the flip side, we may want to clear a certain bit. In that </span><span>case,</span><span> we take advantage of the fact that any value </span><span style="font-weight:bold">AND 0</span><span> becomes 0. If we don’t want to affect the rest of the variable when we clear that bit, then we must </span><span style="font-weight:bold">AND </span><span>it with a very specific </span><span style="font-style:italic">bit mask</span><span>. </span><span>This bit mask should have a value of all-ones, except for the one bit we want cleared. The </span><span style="font-weight:bold">~</span><span> operator flips every bit value, making bit masks easy to create</span><span>. To </span><span>clear bit 12, but keep the rest of the variable untouched, we could </span><span class="CodeSnippet" style="font-family:Times, serif">val &amp;= ~(1 &lt;&lt; 12)</span><span>. </span><span>The </span><span class="CodeSnippet" style="font-family:Times, serif">(1 &lt;&lt; 12)</span><span> creates a </span><span style="font-style:italic">positive mask</span><span> so to speak, and the </span><span style="font-weight:bold">~</span><span> turns it into a negative mask. Our variable might previously have had a 0 or a 1 at bit 12, but now it is 0. </span></p><p><span style="color:#000000; font-family:'Courier New', monospace; font-weight:bold">&#xa0;</span></p><p class="Normal1"><span>Using what we’ve learned earlier, solve these bit-related challenges today:</span></p></div><div style="clear:both; mso-break-type:section-break; page-break-before:auto"><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Count</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Set</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Bits</span></p><p class="Normal1" style="line-height:115%"><span>Given integer, return how many bits are set to 1. </span><span>For an input of </span><span class="CodeSnippet" style="font-family:Times, serif">1023</span><span> (</span><span class="CodeSnippet" style="font-family:Times, serif">0x3FF</span><span>)</span><span>, r</span><span>eturn </span><span class="CodeSnippet" style="font-family:Times, serif">10</span><span>. Given </span><span>the value </span><span class="CodeSnippet" style="font-family:Times, serif">8192</span><span> (</span><span class="CodeSnippet" style="font-family:Times, serif">0x2000</span><span>)</span><span>, return </span><span class="CodeSnippet" style="font-family:Times, serif">1</span><span>.</span></p><p class="Normal1" style="line-height:115%"><span style="font-weight:bold">Second:</span><span> </span><span>can you </span><span>make it </span><span class="CodeSnippet" style="font-family:Times, serif">O(s)</span><span>, where </span><span class="CodeSnippet" style="font-family:Times, serif">s</span><span> is </span><span>the </span><span>number of </span><span style="font-style:italic">set</span><span> bits? </span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Encode</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Bytes</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">to</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">32</span></p><p class="Normal1" style="line-height:115%"><span>Given four values between 0-255, encode them into a 32-bit integer. First should map to most significant 8 bits. Given </span><span class="CodeSnippet" style="font-family:Times, serif">[0xF0, 0xC3, 0x96, 0x59]</span><span>, return </span><span class="CodeSnippet" style="font-family:Times, serif">4039349849</span><span> (</span><span class="CodeSnippet" style="font-family:Times, serif">0xF0C39659</span><span>).</span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><br style="mso-column-break-before:always; clear:both" /><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Reverse Bits</span><span style="font-size:0.86em"> </span></p><p class="Normal1" style="line-height:115%"><span>Given a 32-bit unsigned integer, reverse its bits and return this value. If you are given the value </span><span class="CodeSnippet" style="font-family:Times, serif">0b01100110011001101111000011110000</span><span>, then your function should return the value </span><span class="CodeSnippet" style="font-family:Times, serif">0b00001111000011110110011001100110</span><span>. </span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Decode</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">32</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">to</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Bytes</span></p><p class="Normal1" style="line-height:115%"><span>Given 32-bit integer, return a set of values for the four bytes in the integer. Given </span><span class="CodeSnippet" style="font-family:Times, serif">306542763</span><span> </span><span>(which in hex is </span><span class="CodeSnippet" style="font-family:Times, serif">0x124578AB</span><span>), return </span><span class="CodeSnippet" style="font-family:Times, serif">[0x12, 0x45, 0x78, 0xAB]</span><span>.</span></p></div><div style="clear:both; mso-break-type:section-break; page-break-before:auto"><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Byte</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Array</span></p><p style="line-height:115%"><span>With encode/decode you’ve written above, create a </span><span class="CodeSnippet" style="font-family:Times, serif">ByteArray</span><span> data structure to store 8-bit values encoded into 32-bit ints to save space. Build </span><span class="CodeSnippet" style="font-family:Times, serif">set(index, value)</span><span> and </span><span class="CodeSnippet" style="font-family:Times, serif">get(index)</span><span>.</span><span> </span></p><p style="font-size:1.27em; line-height:115%"><br style="page-break-before:always; clear:both" /></p><p class="PageHeader"><span>Chapter 18</span><span> – Bit Arthmetic</span></p></div><div style="clear:both; mso-break-type:section-break; page-break-before:auto"><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Encode</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Bit</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Num</span></p><p style="line-height:115%"><span>Given </span><span>bit val</span><span>, bit number</span><span>, </span><span>and </span><span>32-bit val</span><span>, mask</span><span> </span><span>bit into 32-bit val and return new val</span><span>.</span><span> For </span><span class="CodeSnippet" style="font-family:Times, serif">(1,22</span><span class="CodeSnippet" style="font-family:Times, serif">,1)</span><span> return </span><span class="CodeSnippet" style="font-family:Times, serif">0x40</span><span class="CodeSnippet" style="font-family:Times, serif">0001</span><span>; for </span><span class="CodeSnippet" style="font-family:Times, serif">(0,3,0x18)</span><span> return </span><span class="CodeSnippet" style="font-family:Times, serif">0x10</span><span>.</span><span> </span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Bit Array</span></p><p style="line-height:115%"><span>With encode/decode functions you’ve written above, create a </span><span class="CodeSnippet" style="font-family:Times, serif">BitArray</span><span> class that stores 1-bit values encoded into 32-bit integers. Include methods </span><span class="CodeSnippet" style="font-family:Times, serif">set(index,val</span><span class="CodeSnippet" style="font-family:Times, serif">)</span><span> and</span><span> </span><span class="CodeSnippet" style="font-family:Times, serif">get(index)</span><span>.</span><span> </span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><br style="mso-column-break-before:always; clear:both" /><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Decode</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Bit</span><span style="font-size:0.86em"> </span><span style="font-size:0.86em">Num</span></p><p style="line-height:115%"><span>Given bit number and 32-bit </span><span>value</span><span>, return </span><span>val of referenced </span><span>bit number. </span><span>For</span><span class="CodeSnippet" style="font-family:Times, serif">(30,0x4FFFFFFF)</span><span>, return </span><span class="CodeSnippet" style="font-family:Times, serif">1</span><span>. </span><span>For </span><span class="CodeSnippet" style="font-family:Times, serif">(3,0x4FFFFFF7)</span><span>, return </span><span class="CodeSnippet" style="font-family:Times, serif">0</span><span>. </span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Radix Sort2</span></p><p><span>Implement RadixSort, based on powers of two instead of digit numerals 0-9. Sort by lowest significant bit, then next least significant bit, etc. What is the big-O runtime to sort 32-bit integers?</span></p></div><div style="clear:both; mso-break-type:section-break; page-break-before:auto"><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Sprinklers</span><span style="font-size:0.86em"> </span></p><p style="line-height:115%"><span>The Rockefeller country estate is watered by a 28-head sprinkler system. Create a function to return a 28-bit number; a landscape microcontroller calls the function each minute to determine which heads to enable. Only one sprinkler can run at a time; each runs 20 minutes a day. Four global variables alter system behavior, in increasing priority: </span><span class="CodeSnippet" style="font-family:Times, serif">RAIN_SENS</span><span> is a precipitation meter – if true, disable all heads. </span><span class="CodeSnippet" style="font-family:Times, serif">SENS_OVERRIDE</span><span>, if true, disables the precipitation meter. While </span><span class="CodeSnippet" style="font-family:Times, serif">SYS_TEST</span><span> is true, cycle through all 28 sprinklers for 1 minute each. Finally, if </span><span class="CodeSnippet" style="font-family:Times, serif">SYS_DISABLE</span><span> is true, turn off all sprinklers.</span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><img src="item_034.png" width="77" height="143" alt="" style="float:left; margin:0pt 9pt" /><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">LED Encoding</span></p><p style="line-height:115%"><span>Classic LEDs have </span><span>seven </span><span>segments that are individually tur</span><span>ned on or </span><span>off to produce </span><span>the desired</span><span> </span><span>letter</span><span> or </span><span>numeral, arranged as in diagram</span><span> at right.</span><span style="color:#000000; font-family:Times, serif; font-size:0.91em"> </span><span>Each segment’s</span><span> on/off state </span><span>will be</span><span> deter</span><span>mined by a different bit in</span><span> a c</span><span>ontainer </span><span>byte</span><span> </span><span>(</span><span>bits </span><span>numbered at right)</span><span>. </span><span>V</span><span>alue </span><span class="CodeSnippet" style="font-family:Times, serif">0x7B</span><span> </span><span>signifies that</span><span> </span><span>segments </span><span class="CodeSnippet" style="font-family:Times, serif">[0,1,3,4,5,</span><span class="CodeSnippet" style="font-family:Times, serif">6]</span><span> </span><span>would</span><span> be </span><span>enabled, </span><span>which would</span><span> display</span><span> numeral ‘</span><span class="CodeSnippet" style="font-family:Times, serif">6</span><span>’. </span><span>Build function</span><span> </span><span class="CodeSnippet" style="font-family:Times, serif">LED2Numeral(ledByte)</span><span> that accepts a byte representing </span><span>the</span><span> states of LED segments in one base-10 numeral, returning </span><span>the numerical </span><span>value of that base-10 numeral (i.e. 0-9). Given </span><span>the input </span><span class="CodeSnippet" style="font-family:Times, serif">36</span><span> (</span><span class="CodeSnippet" style="font-family:Times, serif">0x24</span><span>, segments 2 &amp; 5), return </span><span class="CodeSnippet" style="font-family:Times, serif">1</span><span>. </span></p><p><span>&#xa0;</span></p><p style="line-height:115%"><span style="font-weight:bold">Second</span><span>: c</span><span>reate function </span><span class="CodeSnippet" style="font-family:Times, serif">Int2LED(value)</span><span style="font-weight:bold"> </span><span>that accepts </span><span>a 16-bit integer</span><span> value and translates it into the values needed to produce the corresponding LED readout in base-10. The function should return </span><span>an array of five bytes: each byte representing one of the numerals from </span><span style="font-style:italic">least-significant</span><span> to </span><span style="font-style:italic">most-significant</span><span>. </span><span>Using</span><span> our examples above, </span><span class="CodeSnippet" style="font-family:Times, serif">LEDBytes(85210) == [0,36,93,107,</span><span class="CodeSnippet" style="font-family:Times, serif">127]</span><span>.</span><span> </span></p><p class="Challenge" style="font-size:1.27em; line-height:115%"><span style="font-family:Times, serif; text-decoration:none"></span><span style="color:#000000; font-size:0.86em; text-decoration:none"> </span><span style="font-size:0.86em">Where’s the Bug? (bitwise operators version)</span></p><p style="line-height:115%; text-indent:18pt"><span class="CodeSnippet" style="font-family:Times, serif">// H</span><span class="CodeSnippet" style="font-family:Times, serif">ow</span><span class="CodeSnippet" style="font-family:Times, serif"> many bugs can you </span><span class="CodeSnippet" style="font-family:Times, serif">find</span><span class="CodeSnippet" style="font-family:Times, serif">? </span></p><p style="line-height:115%; margin-left:18pt"><span class="CodeSnippet" style="font-family:Times, serif">function numSetBits(num) { </span><span class="CodeSnippet" style="font-family:Times, serif">  </span><span class="CodeSnippet" style="font-family:Times, serif">// count </span><span class="CodeSnippet" style="font-family:Times, serif">num</span><span class="CodeSnippet" style="font-family:Times, serif"> of set bits in </span><span class="CodeSnippet" style="font-family:Times, serif">a </span><span class="CodeSnippet" style="font-family:Times, serif">64</span><span class="CodeSnippet" style="font-family:Times, serif">-bit </span><span class="CodeSnippet" style="font-family:Times, serif">val</span></p><p style="line-height:115%; margin-left:36pt"><span class="CodeSnippet" style="font-family:Times, serif">while (num) { bitCount </span><span class="CodeSnippet" style="font-family:Times, serif">= </span><span class="CodeSnippet" style="font-family:Times, serif">bitCount + </span><span class="CodeSnippet" style="font-family:Times, serif">num &amp;&amp; 0x1; num = num &gt;&gt; 1; } </span></p><p style="line-height:115%; margin-left:36pt"><span class="CodeSnippet" style="font-family:Times, serif">return bitCount;</span></p><p style="line-height:115%; margin-left:18pt"><span class="CodeSnippet" style="font-family:Times, serif">}</span><span class="CodeSnippet" style="font-family:Times, serif"> </span></p><p style="margin-left:18pt"><br style="page-break-before:always; clear:both" /></p></div></body></html>